{
  "meta": {
    "project": "ITS Lab Exam System",
    "date": "2026-01-13",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "The ITS Lab Exam System is a secure, web-based platform enabling administrators to create and manage online multiple-choice exams while ensuring academic integrity through comprehensive proctoring and security features, providing a robust and user-friendly experience for both admins and students.",
  "core_goals": [
    "Provide a secure and accessible online platform for conducting multiple-choice exams.",
    "Enable administrators to create, manage, and analyze exams with detailed statistics and controls.",
    "Ensure exam integrity with advanced proctoring measures like fullscreen enforcement, exit tracking, and anti-cheat mechanisms.",
    "Support a seamless exam-taking experience for students with timer management, offline recovery, and immediate results.",
    "Maintain high standards of data security, privacy, and reliable performance."
  ],
  "key_features": [
    "Admin authentication with secure bcrypt password hashing, registration, login, and password reset workflows.",
    "Comprehensive exam management including creation, editing, cloning, deletion, activation toggles, and detailed question and option configuration.",
    "Student exam interface requiring fullscreen mode, supporting answer selection, flagging, navigation, and time tracking.",
    "Security features such as fullscreen enforcement, exit count tracking with warnings and auto-submit, copy and context menu restrictions, and dev tools blocking.",
    "Robust time management including countdown timers, pause during offline with grace periods, alerts, and automatic submission upon expiry or violation.",
    "Server-side scoring and answer validation ensuring integrity and correctness of results.",
    "Exam state recovery mechanisms to handle localStorage loss or network interruptions with recovery API endpoints.",
    "Admin dashboard and analytics with exam statistics, attempt management, detailed question performance, violation logs, and export to Excel.",
    "Row-Level Security and API authentication restricting data access to authorized admins only.",
    "Responsive and accessible UI built with Next.js, React, TypeScript, and Tailwind CSS, optimized for desktop and major browsers."
  ],
  "user_flow_summary": [
    "Admin logs in, creates a new exam with configurable security, adds questions and answers, and activates the exam to share link with students.",
    "Students access the exam via a unique link, enter their name and access code if required, review rules, and start the exam in fullscreen mode.",
    "During the exam, students navigate questions, select answers, flag questions for review, monitor time, and either submit manually or auto-submit on timer expiry or security violation.",
    "The system detects fullscreen exits, shows warnings, tracks counts, and auto-submits upon surpassing allowed exits.",
    "If a student loses internet connection, the system pauses the timer, shows a connection warning, and resumes automatically within a configured grace period; otherwise, the exam auto-submits.",
    "Admins view detailed exam attempts, scores, violations, and analytics on the dashboard, with abilities to delete attempts and export results."
  ],
  "validation_criteria": [
    "All admin authentication workflows must securely hash passwords using bcrypt and enforce session security.",
    "Exam creation must allow all configurable options like pass score, duration, shuffle settings, offline grace period, and access codes.",
    "Student exam interface must enforce fullscreen mode, block cheating attempts (copy, right-click, dev tools), and handle navigation and answer saving reliably.",
    "Timers must be accurate, visibly update every second, pause during offline periods, and trigger auto-submit on expiry or violation.",
    "Recovery APIs must restore exam state correctly after network interruptions or localStorage loss.",
    "Server-side scoring must validate answers without exposing correct answers client-side.",
    "Admin dashboard must display accurate exam stats including attempt counts, pass rates, score averages, and suspicious activity logs.",
    "API endpoints must enforce row-level security restricting data access to authorized admins only.",
    "The system must be responsive across supported devices and provide clear error messages and user feedback after successful or failed operations."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Next.js 16",
      "React 19",
      "Supabase (PostgreSQL)",
      "Tailwind CSS",
      "Zustand",
      "React Hot Toast",
      "Bcrypt",
      "Crypto-js",
      "Resend",
      "Nodemailer",
      "XLSX"
    ],
    "features": [
      {
        "name": "Admin Authentication",
        "description": "Admin login, registration, password reset functionality with bcrypt hashing",
        "files": [
          "app/admin/login/page.tsx",
          "app/admin/forgot-password/page.tsx",
          "app/admin/reset-password/page.tsx",
          "app/api/admin/login/route.ts",
          "app/api/admin/register/route.ts",
          "app/api/admin/forgot-password/route.ts",
          "app/api/admin/reset-password/route.ts",
          "lib/store.ts"
        ]
      },
      {
        "name": "Admin Dashboard",
        "description": "Main dashboard for admins to view and manage exams with statistics",
        "files": [
          "app/admin/dashboard/page.tsx"
        ]
      },
      {
        "name": "Exam Creation",
        "description": "Create new exams with questions, options, and security settings",
        "files": [
          "app/admin/create-exam/page.tsx",
          "components/admin/ExamForm.tsx",
          "app/api/admin/exam/create/route.ts"
        ]
      },
      {
        "name": "Exam Management",
        "description": "Edit, delete, clone, and toggle exam status",
        "files": [
          "app/admin/edit-exam/[id]/page.tsx",
          "app/admin/exam/[id]/page.tsx",
          "app/api/admin/exam/update/[id]/route.ts",
          "app/api/admin/exam/delete/route.ts",
          "app/api/admin/exam/toggle-status/route.ts",
          "app/api/exam/clone/route.ts"
        ]
      },
      {
        "name": "Exam Taking Interface",
        "description": "Student-facing exam interface with fullscreen protection and timer",
        "files": [
          "app/exam/[id]/page.tsx",
          "app/api/exam/[id]/details/route.ts",
          "app/api/exam/[id]/questions/route.ts",
          "app/api/exam/[id]/verify-access-code/route.ts"
        ]
      },
      {
        "name": "Security & Proctoring",
        "description": "Fullscreen enforcement, exit tracking, copy prevention, DevTools blocking",
        "files": [
          "hooks/useExamProtection.tsx",
          "lib/secureStorage.ts"
        ]
      },
      {
        "name": "Time Management",
        "description": "Exam timer, offline handling, grace period, auto-submit on expiry",
        "files": [
          "app/exam/[id]/page.tsx",
          "app/api/exam/[id]/offline/route.ts",
          "supabase/functions/auto-submit-expired/index.ts"
        ]
      },
      {
        "name": "Exam Submission",
        "description": "Server-side scoring, answer validation, and result calculation",
        "files": [
          "app/api/exam/[id]/submit/route.ts"
        ]
      },
      {
        "name": "Exam Recovery",
        "description": "Recover exam state from localStorage loss or network interruptions",
        "files": [
          "app/api/exam/[id]/recover/route.ts",
          "app/exam/[id]/page.tsx"
        ]
      },
      {
        "name": "Attempt Management",
        "description": "View and manage student attempts, delete attempts, view details",
        "files": [
          "app/admin/attempt/[id]/page.tsx",
          "app/api/admin/attempt/delete/route.ts"
        ]
      },
      {
        "name": "Database Integration",
        "description": "Supabase client setup, type definitions, and database operations",
        "files": [
          "lib/supabase.ts"
        ]
      },
      {
        "name": "Question Generation",
        "description": "AI-powered question generation API endpoint",
        "files": [
          "app/api/generate-questions/route.ts"
        ]
      },
      {
        "name": "Home Page",
        "description": "Landing page with instructions for students",
        "files": [
          "app/page.tsx"
        ]
      }
    ]
  }
}
